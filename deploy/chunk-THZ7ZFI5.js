import{a as k}from"./chunk-Z4VZXWG7.js";import"./chunk-PCFO4U6U.js";import{a as V,d as I,e as N,f as T,g as W,h as j,n as F,p as D}from"./chunk-W2LRTDY5.js";import{q as E}from"./chunk-3CR76VZE.js";import{$a as v,Eb as C,Fb as d,Gb as w,Jb as g,Kb as f,Lb as _,Pa as l,Qa as M,Z as h,_a as y,eb as S,lb as p,na as u,oa as c,pb as o,pc as U,qb as s,sb as P,tc as O,ub as b,vb as m}from"./chunk-QKIN7CWK.js";function R(n,t){if(n&1&&(o(0,"div",5)(1,"p"),d(2),s()()),n&2){let e=m();l(2),w(e.errorMessage)}}function B(n,t){if(n&1){let e=P();o(0,"form",6,0),b("ngSubmit",function(){u(e);let r=C(1),a=m();return c(a.onSubmit(r))}),o(2,"div",7)(3,"label",8),d(4,"Nom"),s(),o(5,"input",9),_("ngModelChange",function(r){u(e);let a=m();return f(a.user.nom,r)||(a.user.nom=r),c(r)}),s()(),o(6,"div",7)(7,"label",10),d(8,"Email"),s(),o(9,"input",11),_("ngModelChange",function(r){u(e);let a=m();return f(a.user.email,r)||(a.user.email=r),c(r)}),s()(),o(10,"div",7)(11,"label",12),d(12,"Adresse"),s(),o(13,"input",13),_("ngModelChange",function(r){u(e);let a=m();return f(a.user.adresse,r)||(a.user.adresse=r),c(r)}),s()(),o(14,"div",14)(15,"button",15),d(16," Mettre \xE0 jour "),s(),o(17,"button",16),b("click",function(){u(e);let r=m();return c(r.deleteUser())}),d(18," Supprimer "),s()()()}if(n&2){let e=C(1),i=m();l(5),g("ngModel",i.user.nom),l(4),g("ngModel",i.user.email),l(4),g("ngModel",i.user.adresse),l(2),p("disabled",e.invalid)}}function L(n,t){n&1&&(o(0,"div",17)(1,"p"),d(2,"Chargement de l'utilisateur..."),s()())}var x=class n{constructor(t){this.authService=t}user=null;errorMessage=null;subscription;ngOnInit(){this.subscription=this.authService.getUser().subscribe({next:t=>{this.user=t,this.errorMessage=null,console.log("User loaded:",this.user)},error:t=>{console.error("Erreur lors de la r\xE9cup\xE9ration de l'utilisateur:",t),this.errorMessage="Vous n'\xEAtes pas connect\xE9."}})}onSubmit(t){t.valid&&this.user!=null&&this.authService.updateUser(this.user).subscribe({next:e=>{console.log("Utilisateur mis \xE0 jour:",e),this.user=e},error:e=>{console.error("Erreur lors de la mise \xE0 jour de l'utilisateur:",e),this.errorMessage=e.message||"Erreur lors de la mise \xE0 jour de l'utilisateur."}})}deleteUser(){this.user&&this.authService.deleteUser().subscribe({next:t=>{console.log("Utilisateur supprim\xE9 avec succ\xE8s:",t),this.user=null},error:t=>{console.error("Erreur lors de la suppression de l'utilisateur:",t),this.errorMessage=t.message||"Erreur lors de la suppression de l'utilisateur."}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static \u0275fac=function(e){return new(e||n)(M(k))};static \u0275cmp=y({type:n,selectors:[["app-users-page"]],standalone:!1,decls:6,vars:3,consts:[["userForm","ngForm"],[1,"container"],["class","error-message",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],["class","loading",4,"ngIf"],[1,"error-message"],[3,"ngSubmit"],[1,"form-group"],["for","nom"],["type","text","id","nom","name","nom","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","adresse"],["type","text","id","adresse","name","adresse","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"loading"]],template:function(e,i){e&1&&(o(0,"div",1)(1,"h2"),d(2,"Modifier les informations de l'utilisateur"),s(),S(3,R,3,1,"div",2)(4,B,19,4,"form",3)(5,L,3,0,"div",4),s()),e&2&&(l(3),p("ngIf",i.errorMessage),l(),p("ngIf",i.user),l(),p("ngIf",!i.errorMessage&&!i.user))},dependencies:[U,j,V,I,N,F,W,T],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.error-message[_ngcontent-%COMP%]{background-color:#ffe6e6;color:#c00;padding:15px;border:1px solid #cc0000;border-radius:5px;margin-bottom:20px;text-align:center}.loading[_ngcontent-%COMP%]{text-align:center;font-size:1.2em;color:#555;margin-top:50px}.cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:center}.card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e0e0e0;border-radius:10px;width:300px;box-shadow:0 4px 6px #0000001a;transition:transform .2s,box-shadow .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 12px #0003}.card-header[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:15px;border-bottom:1px solid #e0e0e0;border-top-left-radius:10px;border-top-right-radius:10px}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.5em;color:#333}.card-body[_ngcontent-%COMP%]{padding:15px}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;color:#555}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}"]})};var z=[{path:"",component:x}],A=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=v({type:n});static \u0275inj=h({imports:[O,E.forChild(z),D]})};export{A as UsersModule};
